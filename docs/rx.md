# 共通接頭辞検索ライブラリの選定

akaza1 では MARISA を採用していた。
他のライブラリの利用を検討してみる。

## MARISA の検討

MARISA はデータ容量が非常によく圧縮できて、高速なライブラリである。
なのであまり問題はないのだが、以下のような課題もある。

- MARISA は C++ のライブラリであり、同梱するには大きいので現状では外部依存とせざるを得ない。
    - marisa のソースを同梱して marisa-sys を別ライブラリとしてリリースする方向性もあり得る。
    - ただしこれは akaza が一通り UI までできたあとのこととしたほうが良いだろう。
    - なぜならばそれまでの間には marisa-sys 側にも変更を入れたくなる可能性が高いからである。

## RX の検討。

- MARISA は C++ なので、これをラップすると結構大きいバインディングライブラリになること。
    - RX はシングルファイルの C ライブラリなので、ソースコードを git submodule で入れても大した大きさにならないこと。
    - 最終的に rust に移植することも可能なぐらい小さいライブラリであること

などの理由から rx への移行を検討する。

少し検討した感じでは、ファイルの容量は rx のほうが大きくなる可能性がある。
このあたりは、別にあとからでも変更が容易なので、一旦 rust 化がすすんでから再検討をしたい

### 検討結果

RX は c string を利用するので、任意のバイナリを取り扱うことはできない。
RBX は任意のバイナリを利用できるが、prefix search ができない。

ということで、現在の akaza の実装では、バイナリを利用することが必須なので、ちょっと要件と違うかな。。

MARISA に戻すほうが良さそう。
